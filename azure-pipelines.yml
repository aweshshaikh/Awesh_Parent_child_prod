# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:Azure Pipelines

stages:
- stage: CI
  jobs:
  - job: CIWork
    steps:
    - script: "Do CI work"
steps:
- task: TerraformInstaller@1
  inputs:
    terraformVersion: 'latest'
- task: TerraformTask@5
  inputs:
    provider: 'azurerm'
    command: 'init'
    workingDirectory: '$(System.DefaultWorkingDirectory)/environments/dev'
    backendAzureRmOverrideSubscriptionID: '722e98bb-a107-4d7c-8537-ba8c2f35547f'
    backendAzureRmResourceGroupName: 'stg_rg'
    backendAzureRmStorageAccountName: 'stgbckup'
    backendAzureRmContainerName: 'stgcntnr'
    backendAzureRmKey: 'dev.terraform.tfstate'